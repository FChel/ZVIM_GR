<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:f="sap.ui.layout.form"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"	>	
	<Dialog
		title="{i18n>submitTitle}"
		class="sapUiContentPadding sapUiSizeCompact"
		state="Warning"
		type="Message">
		<content>
			<FormattedText htmlText="{/Msg}"/>
			
			<VBox visible="{= ${/IsDueDatePassed} === true}">
				<Label text="{/overDueWarning}" required="true" class="sapUiMediumMarginTop"/>
				<ComboBox selectedKey="{/LateReason}"
					required="true" 
					width="25rem" 
					items="{path : 'reasonModel>/ReasonCodes', 
							sorter: {path: 'Key', descending: false}, 
							filters: [{ path : 'DataType', operator : 'EQ', value1 : 'Late'}]}">
					<core:ListItem key="{reasonModel>Key}" 
						text="{reasonModel>Value}"/>
				</ComboBox>				
				<TextArea value="{/LateComment}" 
					editable="{= ${/LateReason} === 'ZA'}"
					required="{= ${/LateReason} === 'ZA'}"
					width="100%" 
					valueLiveUpdate="true" 
					placeholder="Enter Reason"
					/>
			</VBox>
		</content>			
 		<beginButton> 
			<Button
				text="Approve"
				press="onConfirmOk"
				enabled="{= ${/IsDueDatePassed} !== true || ( ${/LateReason} === 'ZA' &amp;&amp; ${/LateComment}.length > 0) || ( ${/LateReason} !== 'ZA' &amp;&amp; ${/LateReason}.length > 0)}"/>
 		</beginButton>
		<endButton>
			<Button
				text="Cancel"
				press="onConfirmCancel"/> 
 		</endButton>
	</Dialog>
</core:FragmentDefinition>